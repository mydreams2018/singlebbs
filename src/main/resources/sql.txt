 SET GLOBAL log_bin_trust_function_creators = 1;
执行以下脚本======> start
delimiter $$
drop function if exists get_child_list$$
create function get_child_list(in_id varchar(256),in_table varchar(64)) returns varchar(1000)
begin
 declare ids varchar(1000) default '';
 declare tempids varchar(1000);

 set tempids = in_id;
 while tempids is not null do
  set ids = CONCAT_WS(',',ids,tempids);

    IF in_table='details_text_back' THEN
        select GROUP_CONCAT(id) into tempids from details_text_back where FIND_IN_SET(reply_parent,tempids)>0;
    ELSEIF in_table='details_text_front' THEN
        select GROUP_CONCAT(id) into tempids from details_text_front where FIND_IN_SET(reply_parent,tempids)>0;
    ELSEIF in_table='details_text_data' THEN
        select GROUP_CONCAT(id) into tempids from details_text_data where FIND_IN_SET(reply_parent,tempids)>0;
    ELSEIF in_table='details_text_talk' THEN
      select GROUP_CONCAT(id) into tempids from details_text_talk where FIND_IN_SET(reply_parent,tempids)>0;
    ELSE return '';
    END IF;
 end while;
 return ids;
end
$$
delimiter ;
执行以下脚本=====>  end
